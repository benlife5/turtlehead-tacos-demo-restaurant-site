import{_ as x}from"../static/preload-helper-ae2b91b0.js";import{b as k}from"../static/shim-b181d20a.js";function m(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function y(t,e){for(var r="",n=0,s=-1,o=0,i,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(i===47)break;i=47}if(i===47){if(!(s===a-1||o===1))if(s!==a-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=a,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,o=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,o=0}else i===46&&o!==-1?++o:o=-1}return r}function E(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var g={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var o;s>=0?o=arguments[s]:(n===void 0&&(n=k.exports.cwd()),o=n),m(o),o.length!==0&&(e=o+"/"+e,r=o.charCodeAt(0)===47)}return e=y(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(m(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=y(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return m(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];m(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":g.normalize(e)},relative:function(e,r){if(m(e),m(r),e===r||(e=g.resolve(e),r=g.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,o=s-n,i=1;i<r.length&&r.charCodeAt(i)===47;++i);for(var a=r.length,l=a-i,d=o<l?o:l,u=-1,c=0;c<=d;++c){if(c===d){if(l>d){if(r.charCodeAt(i+c)===47)return r.slice(i+c+1);if(c===0)return r.slice(i+c)}else o>d&&(e.charCodeAt(n+c)===47?u=c:c===0&&(u=0));break}var h=e.charCodeAt(n+c),S=r.charCodeAt(i+c);if(h!==S)break;h===47&&(u=c)}var v="";for(c=n+u+1;c<=s;++c)(c===s||e.charCodeAt(c)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+r.slice(i+u):(i+=u,r.charCodeAt(i)===47&&++i,r.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(m(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,o=!0,i=e.length-1;i>=1;--i)if(r=e.charCodeAt(i),r===47){if(!o){s=i;break}}else o=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');m(e);var n=0,s=-1,o=!0,i;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(i=e.length-1;i>=0;--i){var d=e.charCodeAt(i);if(d===47){if(!o){n=i+1;break}}else l===-1&&(o=!1,l=i+1),a>=0&&(d===r.charCodeAt(a)?--a===-1&&(s=i):(a=-1,s=l))}return n===s?s=l:s===-1&&(s=e.length),e.slice(n,s)}else{for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===47){if(!o){n=i+1;break}}else s===-1&&(o=!1,s=i+1);return s===-1?"":e.slice(n,s)}},extname:function(e){m(e);for(var r=-1,n=0,s=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!o){n=a+1;break}continue}s===-1&&(o=!1,s=a+1),l===46?r===-1?r=a:i!==1&&(i=1):r!==-1&&(i=-1)}return r===-1||s===-1||i===0||i===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return E("/",e)},parse:function(e){m(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,o;s?(r.root="/",o=1):o=0;for(var i=-1,a=0,l=-1,d=!0,u=e.length-1,c=0;u>=o;--u){if(n=e.charCodeAt(u),n===47){if(!d){a=u+1;break}continue}l===-1&&(d=!1,l=u+1),n===46?i===-1?i=u:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||l===-1||c===0||c===1&&i===l-1&&i===a+1?l!==-1&&(a===0&&s?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(a,l)):(a===0&&s?(r.name=e.slice(1,i),r.base=e.slice(1,l)):(r.name=e.slice(a,i),r.base=e.slice(a,l)),r.ext=e.slice(i,l)),a>0?r.dir=e.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};g.posix=g;var w=g;const j=t=>{const e=t.split("/");return e.pop(),e.map(()=>"../").reduce((r,n)=>r+n,"")},A=t=>t.split(w.sep).join(w.posix.sep);var T={exports:{}},f=String,C=function(){return{isColorSupported:!1,reset:f,bold:f,dim:f,italic:f,underline:f,inverse:f,hidden:f,strikethrough:f,black:f,red:f,green:f,yellow:f,blue:f,magenta:f,cyan:f,white:f,gray:f,bgBlack:f,bgRed:f,bgGreen:f,bgYellow:f,bgBlue:f,bgMagenta:f,bgCyan:f,bgWhite:f}};T.exports=C();T.exports.createColors=C;const H=t=>`<title>${t.title?t.title:"Yext Pages Site"}</title>
    <meta charset="${t.charset||"UTF-8"}">
    <meta name="viewport" content="${t.viewport||"width=device-width, initial-scale=1"}">
    ${t.tags?t.tags.map(L).join(`
`):""}
    ${t.other?t.other:""}`.split(`
`).filter(e=>e.trim()!="").join(`
`),L=t=>{switch(t.type){case"base":case"link":case"meta":return`<${t.type} ${P(t.attributes)}>`;case"style":case"script":case"noscript":case"template":return`<${t.type} ${P(t.attributes)}></${t.type}>`;default:return console.log(T.exports.yellow(`[WARNING]: Tag type ${t.type} is unsupported by the Tag interface. Please use "other" to render this tag.`)),""}},P=t=>Object.keys(t).map(e=>`${e}="${t[e]}"`).join(" "),F=(t,e)=>{var r,n;return t!=null&&t.lang?t.lang:(r=e==null?void 0:e.document)!=null&&r.locale?(n=e==null?void 0:e.document)==null?void 0:n.locale:"en"},O=(t,e,r)=>`
        const componentUrl = import.meta.resolve("./${A(e)}");
        const renderUrl = import.meta.resolve("./${A(t)}");
        
        const component = await import(componentUrl);
        const render = await import(renderUrl);

        render.render(
        {
            Page: component.default,
            pageProps: ${JSON.stringify(r)},
        }
        );
    `,D=(t,e,r,n)=>(e.replace("<!--app-lang-->",r),t&&(e=b(e,`<script type="module">${t}<\/script>`)),n&&(e=b(e,H(n))),e),N=(t,e,r,n,s,o,i)=>{let a=D(t,e,o,i);return a=b(a,U(r,n,s)),a},U=(t,e,r)=>Array.from(R(t,e,new Set)).map(n=>`<link rel="stylesheet" href="${r+n}"/>`).join(`
`),R=(t,e,r)=>{const n=structuredClone(Object.entries(e).find(([a])=>a===t));if(!n)return new Set;const[s,o]=n;r.add(s);const i=new Set(o.css);return(o.imports||[]).flatMap(a=>Array.from(R(a,e,r))).forEach(a=>i.add(a)),i},_="<head>",b=(t,e)=>{let r=t.indexOf(_);if(r===-1)throw new Error("_server.tsx: No head tag is defined");return r+=_.length,t.slice(0,r)+e+t.slice(r)},z=async(t,e,r,n)=>{if(!t.__meta.manifest)throw new Error("Manifest is undefined");const s=t.__meta.manifest.projectFilepaths,o=e.getHeadConfig?e.getHeadConfig(t):void 0,i=t.__meta.manifest.bundlerManifest,a=`${s.templatesRoot}/${e.templateName}.tsx`,l=`${s.scopedTemplatesPath}/${e.templateName}.tsx`,d=!!s.scopedTemplatesPath&&i[l]?l:a,u=await n.server.render({Page:e.default,pageProps:t});let c;return r&&(c=O(n.client,w.join("assets",e.path.replace("..","")),t)),N(c,u,d,i,t.relativePrefixToRoot,F(o,t),o)},B=t=>{if(W(t.filename,t.config),!t.getPath)throw new Error(`Template ${t.filename} is missing an exported getPath function.`);if(!t.default&&!t.render)throw new Error(`Template ${t.filename} does not have the necessary exports to produce page. A module should either have a React component as a default export or a render function.`)},W=(t,e)=>{if(!e.name)throw new Error(`Template ${t} is missing a "name" in the config function.`);if(e.streamId&&e.stream)throw new Error(`Template ${t} must not define both a "streamId" and a "stream".`)},G=(t,e)=>{let r=t.split("/")[t.split("/").length-1];const n=r.slice(r.lastIndexOf("."));let s=r.slice(0,r.lastIndexOf("."));return e&&(r=r.split(n)[0].slice(0,r.split(n)[0].lastIndexOf("."))+n,s=s.slice(0,s.lastIndexOf("."))),{base:r,name:s}},J=(t,e,r)=>{const n=G(t,r),s={...e,config:V(n.name,e.config),path:t,filename:n.base,templateName:n.name};return B(s),s},V=(t,e)=>{var r;return{name:(r=e==null?void 0:e.name)!=null?r:t,...e}},$=new Map,Y=async(t,e)=>{const r=e.bundlePaths[t].replace("assets","..");if(!r)throw new Error(`Could not find path for feature ${t}`);let n=$.get(r);n||(n=await x(()=>import(r),[],import.meta.url));const s=J(r,n,!0);return $.set(r,s),s},q=async t=>{const e=t.renderPaths._server.replace("assets","..");return{server:await K(e),client:t.renderPaths._client}},p=new Map,K=async t=>{let e=p.get(t);return e||(e=await x(()=>import(t),[],import.meta.url),p.set(t,e)),e},Q=async(t,e,r)=>{var i,a;t.transformProps&&(e=await t.transformProps(e));const n=t.getPath(e);if(!n)throw new Error(`getPath does not return a valid string in template '${t.templateName}'`);const s={...e,path:n,relativePrefixToRoot:j(n)};return{content:await X(t,s,r),path:n,redirects:(a=(i=t.getRedirects)==null?void 0:i.call(t,s))!=null?a:[]}},X=async(t,e,r)=>{const{default:n,render:s,getHeadConfig:o}=t;if(!n&&!s)throw new Error(`Cannot render html from template '${t.config.name}'. Template is missing render function or default export.`);return s?(o&&console.warn(`getHeadConfig for template ${t.config.name} will not be called since a custom render function is defined.`),s(e)):await z(e,t,!0,r)};var M=async t=>{const e=t.__meta.manifest,r=await Y(t.document.__.name,e),n=await q(e);return await Q(r,t,n)};export{M as default};
